<div class="max-w-7xl mx-auto py-8 px-4 sm:px-6">
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <div class="lg:col-span-2 bg-slate-900 rounded-2xl p-8 text-white shadow-xl relative overflow-hidden">
            <div class="absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full blur-3xl opacity-20 -mr-16 -mt-16 pointer-events-none"></div>
            <div class="relative z-10">
                <div class="flex items-center gap-3 mb-4">
                    <div class="bg-indigo-500/20 p-2 rounded-lg"><i class="fa-solid fa-chart-line text-indigo-400"></i></div>
                    <h3 class="text-lg font-bold">Executive Summary</h3>
                </div>
                <p class="text-slate-300 text-sm leading-relaxed mb-6">
                    Model berhasil mengelompokkan 1.000 user ke dalam 4 segmen perilaku distingtif dengan stabilitas struktur (Silhouette 0.29). 
                    Sistem ini mengidentifikasi High-Value Customers (Sultan) dan Churn Risk secara otomatis, memungkinkan strategi marketing yang terukur.
                </p>
                <div class="grid grid-cols-3 gap-4 border-t border-slate-700/50 pt-6">
                    <div>
                        <div class="text-[10px] text-slate-400 uppercase font-bold tracking-wider">Metric</div>
                        <div class="font-bold text-white">K-Means++</div>
                    </div>
                    <div>
                        <div class="text-[10px] text-slate-400 uppercase font-bold tracking-wider">Features</div>
                        <div class="font-bold text-white">RFM + Engagement</div>
                    </div>
                    <div>
                        <div class="text-[10px] text-slate-400 uppercase font-bold tracking-wider">Impact</div>
                        <div class="font-bold text-emerald-400">Personalized</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm flex flex-col justify-center">
            <h4 class="text-xs font-bold text-slate-500 uppercase mb-6 text-center">Model Performance</h4>
            <div class="space-y-6">
                <div class="flex justify-between items-center">
                    <div>
                        <div class="text-2xl font-mono font-bold text-emerald-600" id="valSil">-</div>
                        <div class="text-[10px] text-slate-400 font-bold uppercase">Silhouette Score</div>
                    </div>
                    <div class="h-10 w-10 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-600"><i class="fa-solid fa-bullseye"></i></div>
                </div>
                <div class="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden">
                    <div class="bg-emerald-500 h-1.5 rounded-full" style="width: 65%"></div>
                </div>
                <div class="flex justify-between items-center pt-4 border-t border-slate-50">
                    <div>
                        <div class="text-2xl font-mono font-bold text-indigo-600" id="valInertia">-</div>
                        <div class="text-[10px] text-slate-400 font-bold uppercase">Inertia (Compactness)</div>
                    </div>
                    <div class="h-10 w-10 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600"><i class="fa-solid fa-compress"></i></div>
                </div>
            </div>
            <div class="mt-4 pt-4 border-t border-slate-50">
                <p class="text-[10px] text-slate-400 text-center leading-tight">
                    Silhouette mengukur seberapa mirip objek dengan clusternya sendiri dibandingkan cluster lain. Skor positif (>0.25) menandakan struktur cluster yang solid.
                </p>
            </div>
        </div>
    </div>

    <div class="mb-8">
        <h3 class="text-lg font-bold text-slate-900 mb-4">Segment Personas & Strategies</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <div class="bg-white border-t-4 border-slate-400 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow">
                <div class="flex items-center gap-2 mb-3">
                    <i class="fa-solid fa-seedling text-slate-400"></i>
                    <h4 class="font-bold text-slate-700">Newbie</h4>
                </div>
                <ul class="text-xs text-slate-500 space-y-1 mb-4">
                    <li>• Spend Rendah</li>
                    <li>• Recency Tinggi (Jarang aktif)</li>
                    <li>• Butuh Edukasi Produk</li>
                </ul>
                <div class="bg-slate-50 p-2 rounded border border-slate-100 text-[10px] font-bold text-slate-600">
                    Strategy: Diskon Pengguna Baru & Barang Murah
                </div>
            </div>
            <div class="bg-white border-t-4 border-blue-500 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow">
                <div class="flex items-center gap-2 mb-3">
                    <i class="fa-solid fa-binoculars text-blue-500"></i>
                    <h4 class="font-bold text-slate-700">Window Shopper</h4>
                </div>
                <ul class="text-xs text-slate-500 space-y-1 mb-4">
                    <li>• Views Sangat Tinggi</li>
                    <li>• Konversi Rendah</li>
                    <li>• Suka Banding Harga</li>
                </ul>
                <div class="bg-blue-50 p-2 rounded border border-blue-100 text-[10px] font-bold text-blue-700">
                    Strategy: Retargeting Ads & Limited Time Offer
                </div>
            </div>
            <div class="bg-white border-t-4 border-emerald-500 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow">
                <div class="flex items-center gap-2 mb-3">
                    <i class="fa-solid fa-handshake text-emerald-500"></i>
                    <h4 class="font-bold text-slate-700">Loyalist</h4>
                </div>
                <ul class="text-xs text-slate-500 space-y-1 mb-4">
                    <li>• Frekuensi Belanja Rutin</li>
                    <li>• Spend Menengah</li>
                    <li>• Stabil & Terprediksi</li>
                </ul>
                <div class="bg-emerald-50 p-2 rounded border border-emerald-100 text-[10px] font-bold text-emerald-700">
                    Strategy: Reward Points & Bundle Deals
                </div>
            </div>
            <div class="bg-white border-t-4 border-amber-500 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow">
                <div class="flex items-center gap-2 mb-3">
                    <i class="fa-solid fa-crown text-amber-500"></i>
                    <h4 class="font-bold text-slate-700">Sultan</h4>
                </div>
                <ul class="text-xs text-slate-500 space-y-1 mb-4">
                    <li>• Spend Sangat Tinggi</li>
                    <li>• Sangat Aktif (Engagement)</li>
                    <li>• Sensitif Kualitas</li>
                </ul>
                <div class="bg-amber-50 p-2 rounded border border-amber-100 text-[10px] font-bold text-amber-700">
                    Strategy: Upsell Premium & VIP Treatment
                </div>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        
        <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
            <div class="flex justify-between items-center mb-4">
                <h4 class="text-xs font-bold text-slate-500 uppercase flex items-center gap-2">
                    <i class="fa-solid fa-shapes text-indigo-500"></i> PCA Scatter Plot (2D)
                </h4>
                <span class="text-[10px] text-slate-400">Cluster Separation</span>
            </div>
            <div class="h-64 relative w-full">
                <canvas id="chart-pca"></canvas>
            </div>
            <div class="mt-4 p-3 bg-indigo-50 border border-indigo-100 rounded-lg">
                <p class="text-[10px] text-indigo-700 leading-tight">
                    <strong>Analisis:</strong> Reduksi dimensi fitur multidimensi menjadi 2 sumbu utama (PC1 & PC2). Jarak antar titik merepresentasikan kemiripan perilaku user. Kelompok yang terpisah jauh (misal: Newbie vs Sultan) menunjukkan segmentasi yang efektif dan tidak tumpang tindih.
                </p>
            </div>
        </div>

        <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
            <div class="flex justify-between items-center mb-4">
                <h4 class="text-xs font-bold text-slate-500 uppercase flex items-center gap-2">
                    <i class="fa-solid fa-layer-group text-emerald-500"></i> Silhouette Analysis
                </h4>
                <span class="text-[10px] text-slate-400">Cluster Cohesion</span>
            </div>
            <div class="h-64 relative w-full">
                <canvas id="chart-silhouette"></canvas>
            </div>
            <div class="mt-4 p-3 bg-emerald-50 border border-emerald-100 rounded-lg">
                <p class="text-[10px] text-emerald-700 leading-tight">
                    <strong>Insight:</strong> Grafik ini menampilkan skor kohesi per cluster. Batang yang lebih panjang ke kanan (mendekati 1.0) menunjukkan anggota cluster sangat mirip satu sama lain. Cluster dengan skor rendah mungkin memiliki variasi perilaku yang terlalu luas.
                </p>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        
        <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
            <h4 class="text-xs font-bold text-slate-500 uppercase mb-4 text-center">Feature Correlation</h4>
            <div class="h-48 flex items-center justify-center overflow-hidden">
                <canvas id="chart-correlation"></canvas>
            </div>
            <div class="mt-2 text-center px-4">
                <p class="text-[10px] text-slate-500">
                    Hubungan antar variabel. Warna gelap/besar menunjukkan korelasi kuat (misal: Monetary & Frequency seringkali berjalan beriringan).
                </p>
            </div>
        </div>
        
        <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
            <h4 class="text-xs font-bold text-slate-500 uppercase mb-4 text-center">Feature Importance</h4>
            <div class="h-48 relative w-full">
                <canvas id="chart-importance"></canvas>
            </div>
            <div class="mt-2 text-center px-4">
                <p class="text-[10px] text-slate-500">
                    Fitur "Driver" utama. Grafik ini mengurutkan variabel mana yang paling berpengaruh dalam keputusan algoritma memisahkan user.
                </p>
            </div>
        </div>
        
        <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
            <h4 class="text-xs font-bold text-slate-500 uppercase mb-4 text-center">Rec. Similarity Score</h4>
            <div class="h-48 relative w-full">
                <canvas id="chart-similarity"></canvas>
            </div>
            <div class="mt-2 text-center px-4">
                <p class="text-[10px] text-slate-500">
                    Distribusi skor kemiripan (Cosine Similarity) produk yang direkomendasikan. Puncak di kanan berarti relevansi tinggi.
                </p>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-12 gap-6 mb-8">
        <div class="md:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm flex flex-col">
                <h4 class="text-xs font-bold text-slate-500 uppercase text-center mb-4">Elbow Curve (Optimal K)</h4>
                <div class="h-72 relative w-full flex-1">
                    <canvas id="chart-elbow"></canvas>
                </div>
                <p class="text-[10px] text-slate-400 text-center mt-3 border-t border-slate-50 pt-2">
                    Menentukan jumlah cluster optimal. Titik "siku" di K=4 menunjukkan keseimbangan terbaik antara varians dan kompleksitas.
                </p>
            </div>
            <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm flex flex-col">
                <h4 class="text-xs font-bold text-slate-500 uppercase text-center mb-4">Cluster Centroids</h4>
                <div class="h-72 relative w-full flex-1">
                    <canvas id="chart-radar"></canvas>
                </div>
                <p class="text-[10px] text-slate-400 text-center mt-3 border-t border-slate-50 pt-2">
                    Profil "DNA" dari setiap segmen. Bentuk radar yang berbeda menegaskan bahwa setiap persona memiliki karakteristik unik.
                </p>
            </div>
        </div>
        <div class="md:col-span-4 bg-white border border-slate-200 rounded-2xl p-6 shadow-sm flex flex-col">
            <h4 class="text-xs font-bold text-slate-500 uppercase text-center mb-4">User Distribution</h4>
            <div class="h-72 relative w-full flex-1">
                <canvas id="chart-pie"></canvas>
            </div>
            <p class="text-[10px] text-slate-400 text-center mt-3 border-t border-slate-50 pt-2">
                Proporsi populasi user. Segmen yang terlalu kecil/besar mungkin memerlukan penyesuaian strategi sampling.
            </p>
        </div>
    </div>

    <div class="bg-white border border-slate-200 rounded-2xl overflow-hidden shadow-sm mb-8">
        <div class="px-6 py-4 border-b border-slate-200 bg-slate-50 flex justify-between items-center">
            <h4 class="font-bold text-xs text-slate-600 uppercase">Centroid Profiling Data (Deep Dive)</h4>
            <span class="text-[10px] bg-white border border-slate-200 px-2 py-1 rounded text-slate-400">Real Values (Inverse Scaled)</span>
        </div>
        <div class="overflow-x-auto">
            <table class="w-full text-xs text-left text-slate-600">
                <thead class="bg-white border-b border-slate-100 text-slate-400 uppercase font-semibold">
                    <tr>
                        <th class="px-6 py-3">Cluster</th>
                        <th class="px-6 py-3 text-right">Avg Monetary</th>
                        <th class="px-6 py-3 text-right">Avg Frequency</th>
                        <th class="px-6 py-3 text-right">Avg Recency</th>
                        <th class="px-6 py-3 text-right">Avg Views</th>
                    </tr>
                </thead>
                <tbody id="table-centroids" class="divide-y divide-slate-50 text-slate-600 font-mono">
                    <tr><td colspan="5" class="px-6 py-4 text-center italic">Loading data...</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="bg-indigo-900 rounded-2xl p-8 text-white text-center shadow-xl">
        <h3 class="text-lg font-bold mb-8">How The Recommendation Engine Works</h3>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 relative">
            <div class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-indigo-700 -z-0 transform -translate-y-1/2 scale-x-90"></div>
            
            <div class="relative z-10 bg-indigo-900 p-2">
                <div class="w-16 h-16 mx-auto bg-indigo-800 rounded-2xl flex items-center justify-center mb-4 border border-indigo-700 shadow-lg">
                    <i class="fa-solid fa-user-tag text-2xl text-indigo-300"></i>
                </div>
                <h4 class="font-bold text-sm mb-1">1. Vectorization</h4>
                <p class="text-[10px] text-indigo-300">Konversi data mentah user menjadi vektor fitur 8-dimensi (Scaling & Log Transform).</p>
            </div>
            
            <div class="relative z-10 bg-indigo-900 p-2">
                <div class="w-16 h-16 mx-auto bg-indigo-800 rounded-2xl flex items-center justify-center mb-4 border border-indigo-700 shadow-lg">
                    <i class="fa-solid fa-layer-group text-2xl text-indigo-300"></i>
                </div>
                <h4 class="font-bold text-sm mb-1">2. Clustering</h4>
                <p class="text-[10px] text-indigo-300">K-Means menghitung jarak Euclidean terdekat ke Centroid untuk menentukan label segmen.</p>
            </div>
            
            <div class="relative z-10 bg-indigo-900 p-2">
                <div class="w-16 h-16 mx-auto bg-indigo-800 rounded-2xl flex items-center justify-center mb-4 border border-indigo-700 shadow-lg">
                    <i class="fa-solid fa-filter text-2xl text-indigo-300"></i>
                </div>
                <h4 class="font-bold text-sm mb-1">3. Tier Mapping</h4>
                <p class="text-[10px] text-indigo-300">Filter produk berdasarkan Tier Harga yang sesuai dengan daya beli segmen terpilih.</p>
            </div>
            
            <div class="relative z-10 bg-indigo-900 p-2">
                <div class="w-16 h-16 mx-auto bg-indigo-800 rounded-2xl flex items-center justify-center mb-4 border border-indigo-700 shadow-lg">
                    <i class="fa-solid fa-magnifying-glass-dollar text-2xl text-emerald-400"></i>
                </div>
                <h4 class="font-bold text-sm mb-1 text-emerald-400">4. Similarity</h4>
                <p class="text-[10px] text-indigo-300">Cosine Similarity mencocokkan vektor preferensi user dengan vektor atribut produk.</p>
            </div>
        </div>
    </div>
</div>