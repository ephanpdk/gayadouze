<!DOCTYPE html>
<html lang="en" class="antialiased">
<head>
    {% include "partials/head.html" %}
</head>
<body class="bg-slate-50 text-slate-800 font-sans selection:bg-indigo-500 selection:text-white">

    <div id="toast-container" class="fixed top-6 right-6 z-50 space-y-3 pointer-events-none"></div>

    {% include "partials/navbar.html" %}

    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
            <div>
                <h1 class="text-2xl font-bold text-slate-900 tracking-tight">Customer Intelligence Dashboard</h1>
                <p class="text-sm text-slate-500 mt-1">AI-Driven Segmentation & Recommendation Engine</p>
            </div>
            <div class="flex gap-2">
                <button onclick="switchView('dashboard')" id="nav-dashboard" class="px-4 py-2 rounded-lg text-xs font-bold bg-white border border-slate-200 text-slate-600 shadow-sm hover:border-indigo-300 transition">
                    <i class="fa-solid fa-gamepad mr-2"></i>Simulator
                </button>
                <button onclick="switchView('insights')" id="nav-insights" class="px-4 py-2 rounded-lg text-xs font-bold bg-white border border-slate-200 text-slate-600 shadow-sm hover:border-indigo-300 transition">
                    <i class="fa-solid fa-chart-pie mr-2"></i>Analytics
                </button>
            </div>
        </div>

        <div id="view-dashboard" class="fade-enter space-y-8">
            
            {% include "partials/simulator.html" %}

            <div id="result-anchor" class="scroll-mt-24">
                {% include "partials/results.html" %}
            </div>

            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                <div class="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
                    <h3 class="text-xs font-bold text-slate-500 uppercase tracking-wider">
                        <i class="fa-solid fa-clock-rotate-left mr-2"></i>Recent Simulations
                    </h3>
                    <button onclick="localStorage.removeItem('sessionLogs'); init();" class="text-[10px] text-red-400 hover:text-red-600 font-bold">CLEAR HISTORY</button>
                </div>
                <div class="overflow-x-auto max-h-60 overflow-y-auto">
                    <table class="w-full text-xs text-left text-slate-600">
                        <thead class="text-[10px] text-slate-400 uppercase bg-white border-b border-slate-100 sticky top-0 z-10 shadow-sm">
                            <tr>
                                <th class="px-6 py-3 font-bold">Time</th>
                                <th class="px-6 py-3 font-bold">Persona</th>
                                <th class="px-6 py-3 font-bold text-right">Spend</th>
                                <th class="px-6 py-3 font-bold text-center">Valid</th>
                            </tr>
                        </thead>
                        <tbody id="log-table" class="divide-y divide-slate-50 bg-white"></tbody>
                    </table>
                </div>
            </div>

        </div>

        <div id="view-insights" class="hidden fade-enter">
            {% include "partials/analytics.html" %}
        </div>
        <div id="view-pipeline" class="hidden fade-enter">
            {% include "partials/pipeline.html" %}
        </div>

    </main>

    {% include "partials/modals.html" %}
    {% include "partials/scripts.html" %}

</body>
</html>